window.onload=async()=>{const e=document.querySelector("#layout #main .article .info .date");e.addEventListener("click",(()=>{window.location.href="/awen/darling"}));e.id="shangshangEggHunt";const{baseURL:t,imgType:n,miniURL:c,personURL:i,data:s,coverIMG:l}=window.albumConfig;s.sort(((e,t)=>{if(e.top&&!t.top){return-1}else if(!e.top&&t.top){return 1}return e.title.localeCompare(t.title,"zh-Hans-CN",{sensitivity:"accent"})}));const{defaultLoadingImg:o}=window.sysConfig;const a=["#7bd0c1","#7ecaf6","#f2849e","#8499e7","#ae85ca"];const d=3;const m=4;const r=window.innerWidth>580?false:true;const y=document.getElementById("album-back-box");const u=document.getElementById("album-all-text");const p=document.getElementById("album-current-text");const f=document.getElementById("awen-album-cover-box");const E=document.getElementById("domestic-box");const g=document.getElementById("awen-album-detail-box");const b=document.getElementById("album-we-box");const w=document.getElementById("album-picture-box");const v=document.getElementById("close-album-tree");s.forEach((e=>{const i=document.createElement("div");const s=document.createElement("span");s.innerText=e.title;s.className="type-title";s.id="Awen-"+e.title;const o=document.createElement("div");o.className="city-list";e.cityList.forEach((e=>{const i=document.createElement("div");i.className="city-item";const s=document.createElement("img");s.loading="lazy";s.className="city-img";s.src=`${t}/${e.city}/${c}/${l}.${n}`;i.append(s);const d=document.createElement("div");d.className="city-mask";d.style.backgroundColor=a[Math.floor(Math.random()*5)];i.append(d);const m=document.createElement("div");m.className="city-name";m.innerText=e.city;i.append(m);i.addEventListener("click",(function(){p.innerText="/ "+e.city;h(e.city);L(true)}));o.append(i)}));i.append(s);i.append(o);E.append(i)}));function h(e){const l=[];s.forEach((e=>{l.push(...e.cityList)}));const{city:a,personNum:d,pictureNum:y}=l.find((t=>t.city===e));if(d){for(let e=1;e<=d;e++){const s=document.createElement("div");s.className="detail-item";const l=document.createElement("img");l.loading="lazy";l.className="load-img";l.src=o;const d=document.createElement("img");d.loading="lazy";d.className="detail-img";d.src=`${t}/${a}/${c}/${i}${e}.${n}`;s.append(l);s.append(d);b.append(s)}if(!r){const e=m-d%m;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";b.append(e)}}b.style.display="flex"}else{b.style.display="none"}if(y){for(let e=1;e<=y;e++){const i=document.createElement("div");i.className="detail-item";const s=document.createElement("img");s.loading="lazy";s.className="load-img";s.src=o;const l=document.createElement("img");l.loading="lazy";l.className="detail-img";l.src=`${t}/${a}/${c}/${e}.${n}`;i.append(s);i.append(l);w.append(i)}if(!r){const e=m-y%m;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";w.append(e)}}w.style.display="flex"}else{w.style.display="none"}$()}function L(e,t=true){if(t){window.scrollTo({top:0,behavior:"smooth"})}if(e){g.style.display="block";y.style.display="block";f.style.display="none"}else{f.style.display="block";g.style.display="none";y.style.display="none"}}function $(){let e=document.getElementById("showimg"),t=document.getElementById("showimg-content"),n=document.querySelectorAll(".article .content img");function i(n){t.src="";t.alt=n.alt;const i=new RegExp(`/${c}`);t.src=n.src.replace(i,"");e.style.opacity=1;e.style.visibility="visible"}function s(){e.style.opacity=0;e.style.visibility="hidden"}for(let e of n)e.addEventListener("click",(function(){i(this)}));e.addEventListener("click",s);window.addEventListener("resize",s)}function N(e){const t=document.getElementById("Awen-"+e);const n=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:t.getBoundingClientRect().top+n-62,behavior:"smooth"});return;document.getElementById("Awen-"+e).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}if(r){const e=document.getElementById("awen-album-tree");e.style.display="none"}else{const e=document.querySelector("#awen-album-tree .tree-list");s.forEach((t=>{const n=document.createElement("div");n.className="list-item";n.innerHTML=`<span class='list-item-show'>+&nbsp;</span><span class='list-item-name'>${t.title}${t.country?"("+t.country+")":""}</span>`;e.append(n);n.addEventListener("click",(function(){b.innerHTML="";w.innerHTML="";L(false,false);setTimeout((()=>{N(t.title)}),100);const e=document.querySelectorAll(`#list-city-${t.title}`);e.forEach((e=>{if(e.style.display==="none"){e.style.display="block";n.childNodes[0].innerHTML="-&nbsp;"}else{e.style.display="none";n.childNodes[0].innerHTML="+&nbsp;"}}))}));t.cityList.forEach((n=>{const c=document.createElement("div");c.className="list-city-item";c.id=`list-city-${t.title}`;c.innerHTML=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class='list-city-item-name'>\n          ${n.city}</span>`;c.style.display="none";e.append(c);c.addEventListener("click",(function(){b.innerHTML="";w.innerHTML="";p.innerText="/ "+n.city;h(n.city);L(true)}))}))}))}u.addEventListener("click",(function(){b.innerHTML="";w.innerHTML="";L(false)}));v.addEventListener("click",(function(){const e=document.getElementById("awen-album-tree");e.style.display="none"}))};