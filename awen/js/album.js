window.onload=()=>{const e=window.albumData;const t=window.albumBaseUrl;const n=["#7bd0c1","#7ecaf6","#f2849e","#8499e7","#ae85ca"];const c=3;const s=4;const l=window.innerWidth>580?false:true;const o=document.getElementById("album-back-box");const a=document.getElementById("album-all-text");const i=document.getElementById("album-current-text");const d=document.getElementById("awen-album-cover-box");const m=document.getElementById("domestic-box");const r=document.getElementById("foreign-box");const u=document.getElementById("awen-album-detail-box");const y=document.getElementById("album-we-box");const p=document.getElementById("album-picture-box");const f=document.getElementById("showimg-content");let g=null,h=1,E,x,b,v=0,$=0,w,N,I;let k=null,B,L,M;e.forEach((e=>{const c=document.createElement("div");c.className="city-item";const s=document.createElement("img");s.className="city-img";s.src=`${t}/${e.city}/mini/${e.coverURL}`;c.append(s);const l=document.createElement("div");l.className="city-mask";l.style.backgroundColor=n[Math.floor(Math.random()*5)];c.append(l);const o=document.createElement("div");o.className="city-name";o.innerText=e.city;c.append(o);c.addEventListener("click",(function(){i.innerText="/ "+e.city;Y(e.city);X(true)}));m.append(c)}));if(!l){const t=c-e.length%c;for(let e=0;e<t;e++){const e=document.createElement("div");e.className="city-item";m.append(e)}}a.addEventListener("click",(function(){y.innerHTML="";p.innerHTML="";X(false)}));function X(e){if(e){u.style.display="block";o.style.display="block";d.style.display="none"}else{d.style.display="block";u.style.display="none";o.style.display="none"}}function Y(n){const{we:c,picture:o}=e.find((e=>e.city===n));if(c&&c.length){c.forEach((e=>{const c=document.createElement("div");c.className="detail-item";const s=document.createElement("img");s.className="load-img";s.src="https://ylawenimg.netlify.app/img/cxk.gif";const l=document.createElement("img");l.className="detail-img";l.src=`${t}/${n}/mini/${e}`;c.append(s);c.append(l);y.append(c)}));if(!l){const e=s-c.length%s;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";y.append(e)}}y.style.display="flex"}else{y.style.display="none"}if(o&&o.length){o.forEach((e=>{const c=document.createElement("div");c.className="detail-item";const s=document.createElement("img");s.className="load-img";s.src="https://ylawenimg.netlify.app/img/cxk.gif";const l=document.createElement("img");l.className="detail-img";l.src=`${t}/${n}/mini/${e.url}`;if(e.info){const t=document.createElement("div");t.className="detail-item-tip";t.innerText=e.info;c.append(t)}c.append(s);c.append(l);p.append(c)}));if(!l){const e=s-o.length%s;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";p.append(e)}}p.style.display="flex"}else{p.style.display="none"}T()}function T(){let e=document.querySelectorAll(".article .content img");let t=document.getElementById("showimg");function n(e){f.src="";f.alt=e.alt;f.src=e.src.replace(/\/mini/,"");t.style.opacity=1;t.style.visibility="visible";g=null;h=1;E;x;b;v=0;$=0;w;N;I;k=null;B;L;M;f.style.transform="none"}function c(){t.style.opacity=0;t.style.visibility="hidden"}for(let t of e)t.addEventListener("click",(function(){n(this)}));t.addEventListener("click",c);window.addEventListener("resize",c)}function q(e){if(e.touches.length==2){const t={x:(e.touches[0].pageX-2*v+e.touches[1].pageX)/2,y:(e.touches[0].pageY-2*$+e.touches[1].pageY)/2,distance:Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))};return t}else if(e.touches.length==1){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}}f.addEventListener("touchstart",(e=>{if(e.touches.length==2){let t=true;for(let n=0;n<e.touches.length;n++){if(e.touches[n].target.nodeName!="IMG"){t=false}}if(t){b=true;g=q(e);E=q(e).x;x=q(e).y}}else if(e.touches.length==1){M=true;k=q(e)}}));f.addEventListener("touchmove",(e=>{e.preventDefault();if(e.touches.length==2){if(b){let t=true;for(let n=0;n<e.touches.length;n++){if(e.touches[n].target.nodeName!="IMG"){t=false}}if(t){const t=q(e);const n=t.distance/g.distance;if(n*h<1)return false;const c={x:g.x*n,y:g.y*n};f.style.transform=`matrix(${n*h}, 0, 0, ${n*h}, ${t.x+v-c.x}, ${t.y+$-c.y})`;w=t.x+v-c.x;N=t.y+$-c.y;I=n*h}}}else if(e.touches.length==1){if(M){const t={x:e.touches[0].pageX,y:e.touches[0].pageY};f.style.transform=`matrix(${I}, 0, 0, ${I}, ${t.x-k.x+v}, ${t.y-k.y+$})`;w=t.x-k.x+v;N=t.y-k.y+$}}}));f.addEventListener("touchend",(e=>{f.style.transform=`matrix(${I}, 0, 0, ${I}, ${w}, ${N})`;v=w;$=N;h=I}))};