window.onload=()=>{const e=document.querySelector("#layout #main .article .info .date");e.addEventListener("click",(()=>{window.location.href="/awen/darling"}));e.id="zhenbanEggHunt";const t=window.albumData;const n=window.albumBaseUrl;const c=["#7bd0c1","#7ecaf6","#f2849e","#8499e7","#ae85ca"];const o=3;const a=4;const l=window.innerWidth>580?false:true;const s=document.getElementById("album-back-box");const i=document.getElementById("album-all-text");const d=document.getElementById("album-current-text");const m=document.getElementById("awen-album-cover-box");const r=document.getElementById("domestic-box");const u=document.getElementById("foreign-box");const y=document.getElementById("awen-album-detail-box");const p=document.getElementById("album-we-box");const f=document.getElementById("album-picture-box");const g=document.getElementById("showimg-content");let h=null,E=1,x,b,v,w=0,$=0,N,k,I;let B=null,L,M,X;t.forEach((e=>{const t=document.createElement("div");t.className="city-item";const o=document.createElement("img");o.className="city-img";o.src=`${n}/${e.city}/mini/${e.coverURL}`;t.append(o);const a=document.createElement("div");a.className="city-mask";a.style.backgroundColor=c[Math.floor(Math.random()*5)];t.append(a);const l=document.createElement("div");l.className="city-name";l.innerText=e.city;t.append(l);t.addEventListener("click",(function(){d.innerText="/ "+e.city;T(e.city);Y(true)}));r.append(t)}));if(!l){const e=o-t.length%o;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="city-item";r.append(e)}}i.addEventListener("click",(function(){p.innerHTML="";f.innerHTML="";Y(false)}));function Y(e){if(e){y.style.display="block";s.style.display="block";m.style.display="none"}else{m.style.display="block";y.style.display="none";s.style.display="none"}}function T(e){const{we:c,picture:o}=t.find((t=>t.city===e));if(c&&c.length){c.forEach((t=>{const c=document.createElement("div");c.className="detail-item";const o=document.createElement("img");o.className="load-img";o.src="https://ylawenimg.netlify.app/img/cxk.gif";const a=document.createElement("img");a.className="detail-img";a.src=`${n}/${e}/mini/${t}`;c.append(o);c.append(a);p.append(c)}));if(!l){const e=a-c.length%a;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";p.append(e)}}p.style.display="flex"}else{p.style.display="none"}if(o&&o.length){o.forEach((t=>{const c=document.createElement("div");c.className="detail-item";const o=document.createElement("img");o.className="load-img";o.src="https://ylawenimg.netlify.app/img/cxk.gif";const a=document.createElement("img");a.className="detail-img";a.src=`${n}/${e}/mini/${t.url}`;if(t.info){const e=document.createElement("div");e.className="detail-item-tip";e.innerText=t.info;c.append(e)}c.append(o);c.append(a);f.append(c)}));if(!l){const e=a-o.length%a;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";f.append(e)}}f.style.display="flex"}else{f.style.display="none"}q()}function q(){let e=document.querySelectorAll(".article .content img");let t=document.getElementById("showimg");function n(e){g.src="";g.alt=e.alt;g.src=e.src.replace(/\/mini/,"");t.style.opacity=1;t.style.visibility="visible";h=null;E=1;x;b;v;w=0;$=0;N;k;I;B=null;L;M;X;g.style.transform="none"}function c(){t.style.opacity=0;t.style.visibility="hidden"}for(let t of e)t.addEventListener("click",(function(){n(this)}));t.addEventListener("click",c);window.addEventListener("resize",c)}function H(e){if(e.touches.length==2){const t={x:(e.touches[0].pageX-2*w+e.touches[1].pageX)/2,y:(e.touches[0].pageY-2*$+e.touches[1].pageY)/2,distance:Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))};return t}else if(e.touches.length==1){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}}g.addEventListener("touchstart",(e=>{if(e.touches.length==2){let t=true;for(let n=0;n<e.touches.length;n++){if(e.touches[n].target.nodeName!="IMG"){t=false}}if(t){v=true;h=H(e);x=H(e).x;b=H(e).y}}else if(e.touches.length==1){X=true;B=H(e)}}));g.addEventListener("touchmove",(e=>{e.preventDefault();if(e.touches.length==2){if(v){let t=true;for(let n=0;n<e.touches.length;n++){if(e.touches[n].target.nodeName!="IMG"){t=false}}if(t){const t=H(e);const n=t.distance/h.distance;if(n*E<1)return false;const c={x:h.x*n,y:h.y*n};g.style.transform=`matrix(${n*E}, 0, 0, ${n*E}, ${t.x+w-c.x}, ${t.y+$-c.y})`;N=t.x+w-c.x;k=t.y+$-c.y;I=n*E}}}else if(e.touches.length==1){if(X){const t={x:e.touches[0].pageX,y:e.touches[0].pageY};g.style.transform=`matrix(${I}, 0, 0, ${I}, ${t.x-B.x+w}, ${t.y-B.y+$})`;N=t.x-B.x+w;k=t.y-B.y+$}}}));g.addEventListener("touchend",(e=>{g.style.transform=`matrix(${I}, 0, 0, ${I}, ${N}, ${k})`;w=N;$=k;E=I}))};