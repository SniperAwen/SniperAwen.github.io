window.onload=async()=>{const e=document.querySelector("#layout #main .article .info .date");e.addEventListener("click",(()=>{window.location.href="/awen/darling"}));e.id="shangshangEggHunt";const{baseURL:t,imgType:n,miniURL:s,personURL:a,data:c,coverIMG:l}=window.albumConfig;c.sort(((e,t)=>{if(e.top&&!t.top){return-1}else if(!e.top&&t.top){return 1}return e.title.localeCompare(t.title,"zh-Hans-CN",{sensitivity:"accent"})}));const{defaultLoadingImg:o}=window.sysConfig;const i=["#7bd0c1","#7ecaf6","#f2849e","#8499e7","#ae85ca"];const d=3;const r=4;const m=window.innerWidth>580?false:true;const p=document.getElementById("album-back-box");const u=document.getElementById("album-all-text");const y=document.getElementById("album-current-text");const g=document.getElementById("awen-album-cover-box");const f=document.getElementById("domestic-box");const h=document.getElementById("awen-album-detail-box");const E=document.getElementById("album-we-box");const b=document.getElementById("album-picture-box");const w=document.getElementById("close-album-tree");c.forEach((e=>{const a=document.createElement("div");const c=document.createElement("span");c.innerText=e.title;c.className="type-title";c.id="Awen-"+e.title;const o=document.createElement("div");o.className="city-list";e.cityList.forEach((e=>{const a=document.createElement("div");a.className="city-item";const c=document.createElement("img");c.loading="lazy";c.className="city-img";c.src=`${t}/${e.city}/${s}/${l}.${n}`;a.append(c);const d=document.createElement("div");d.className="city-mask";d.style.backgroundColor=i[Math.floor(Math.random()*5)];a.append(d);const r=document.createElement("div");r.className="city-name";r.innerText=e.city;a.append(r);a.addEventListener("click",(function(){y.innerText="/ "+e.city;v(e.city);L(true)}));o.append(a)}));a.append(c);a.append(o);f.append(a)}));function v(e){const l=[];c.forEach((e=>{l.push(...e.cityList)}));const{city:i,personNum:d,pictureNum:p}=l.find((t=>t.city===e));if(d){for(let e=1;e<=d;e++){const c=document.createElement("div");c.className="detail-item";const l=document.createElement("img");l.loading="lazy";l.className="load-img";l.src=o;const d=document.createElement("img");d.loading="lazy";d.className="detail-img";d.src=`${t}/${i}/${s}/${a}${e}.${n}`;c.append(l);c.append(d);E.append(c)}if(!m){const e=r-d%r;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";E.append(e)}}E.style.display="flex"}else{E.style.display="none"}if(p){for(let e=1;e<=p;e++){const a=document.createElement("div");a.className="detail-item";const c=document.createElement("img");c.loading="lazy";c.className="load-img";c.src=o;const l=document.createElement("img");l.loading="lazy";l.className="detail-img";l.src=`${t}/${i}/${s}/${e}.${n}`;a.append(c);a.append(l);b.append(a)}if(!m){const e=r-p%r;for(let t=0;t<e;t++){const e=document.createElement("div");e.className="detail-item";b.append(e)}}b.style.display="flex"}else{b.style.display="none"}$()}function L(e,t=true){if(t){window.scrollTo({top:0,behavior:"smooth"})}if(e){h.style.display="block";p.style.display="block";g.style.display="none"}else{g.style.display="block";h.style.display="none";p.style.display="none"}}function $(){let e=document.getElementById("showimg"),t=document.getElementById("showimg-content"),n=document.querySelectorAll(".article .content img");function a(n){t.src="";t.alt=n.alt;const a=new RegExp(`/${s}`);t.src=n.src.replace(a,"");e.style.opacity=1;e.style.visibility="visible";T(t)}function c(){e.style.opacity=0;e.style.visibility="hidden";setTimeout((()=>{x(t)}),500)}for(let e of n)e.addEventListener("click",(function(){a(this)}));e.addEventListener("click",c);window.addEventListener("resize",c)}function N(e){const t=document.getElementById("Awen-"+e);const n=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:t.getBoundingClientRect().top+n-62,behavior:"smooth"});return;document.getElementById("Awen-"+e).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}if(m){const e=document.getElementById("awen-album-tree");e.style.display="none"}else{const e=document.querySelector("#awen-album-tree .tree-list");c.forEach((t=>{const n=document.createElement("div");n.className="list-item";n.innerHTML=`<span class='list-item-show'>+&nbsp;</span><span class='list-item-name'>${t.title}${t.country?"("+t.country+")":""}</span>`;e.append(n);n.addEventListener("click",(function(){E.innerHTML="";b.innerHTML="";L(false,false);setTimeout((()=>{N(t.title)}),100);const e=document.querySelectorAll(`#list-city-${t.title}`);e.forEach((e=>{if(e.style.display==="none"){e.style.display="block";n.childNodes[0].innerHTML="-&nbsp;"}else{e.style.display="none";n.childNodes[0].innerHTML="+&nbsp;"}}))}));t.cityList.forEach((n=>{const s=document.createElement("div");s.className="list-city-item";s.id=`list-city-${t.title}`;s.innerHTML=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class='list-city-item-name'>\n          ${n.city}</span>`;s.style.display="none";e.append(s);s.addEventListener("click",(function(){E.innerHTML="";b.innerHTML="";y.innerText="/ "+n.city;v(n.city);L(true)}))}))}))}u.addEventListener("click",(function(){E.innerHTML="";b.innerHTML="";L(false)}));function T(e){const t={lastDist:0,startX:0,startY:0,translateX:0,translateY:0};e.addEventListener("touchstart",(function(e){if(e.touches.length===2){let n=e.touches[0];let s=e.touches[1];t.lastDist=Math.sqrt(Math.pow(s.pageX-n.pageX,2)+Math.pow(s.pageY-n.pageY,2))}else if(e.touches.length===1){t.startX=e.touches[0].pageX;t.startY=e.touches[0].pageY}}),false);e.addEventListener("touchmove",(function(n){n.preventDefault();if(n.touches.length===2){return;let s=n.touches[0];let a=n.touches[1];let c=Math.sqrt(Math.pow(a.pageX-s.pageX,2)+Math.pow(a.pageY-s.pageY,2));let l=c/t.lastDist;t.lastDist=c;e.style.transform="scale("+l+") translate("+t.translateX+"px, "+t.translateY+"px)"}else if(n.touches.length===1){let s=n.touches[0].pageX-t.startX;let a=n.touches[0].pageY-t.startY;t.translateX+=s;t.translateY+=a;e.style.transform="scale(1) translate("+t.translateX+"px, "+t.translateY+"px)";t.startX=n.touches[0].pageX;t.startY=n.touches[0].pageY}}),false)}function x(e){e.style.transform="none"}};